<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:ProyectoMAUI.ViewModel"
             x:Class="ProyectoMAUI.View.PacienteView"
             x:DataType="vm:PacienteViewModel"
             BackgroundColor="#AFC8AD"
             Title="Registro de pacientes">

    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="14">

            <!-- Nombre -->
            <Grid ColumnDefinitions="80,*">
                <Label Text="Nombre:" FontAttributes="Bold" VerticalOptions="Center" Margin="0,0,10,0"/>
                <Entry Grid.Column="1" Text="{Binding Nombre}" HorizontalOptions="FillAndExpand"/>
            </Grid>

            <!-- Apellido -->
            <Grid ColumnDefinitions="80,*">
                <Label Text="Apellido:" FontAttributes="Bold" VerticalOptions="Center" Margin="0,0,10,0"/>
                <Entry Grid.Column="1" Text="{Binding Apellido}" HorizontalOptions="FillAndExpand"/>
            </Grid>

            <!-- Edad -->
            <Grid ColumnDefinitions="80,*">
                <Label Text="Edad:" FontAttributes="Bold" VerticalOptions="Center" Margin="0,0,10,0"/>
                <Entry Grid.Column="1" Text="{Binding Edad}" Keyboard="Numeric" HorizontalOptions="FillAndExpand"/>
            </Grid>

            <!-- Peso -->
            <Grid ColumnDefinitions="80,*">
                <Label Text="Peso:" FontAttributes="Bold" VerticalOptions="Center" Margin="0,0,10,0"/>
                <Entry Grid.Column="1" Text="{Binding Peso}" Keyboard="Numeric" HorizontalOptions="FillAndExpand"/>
            </Grid>

            <!-- Estatura -->
            <Grid ColumnDefinitions="80,*">
                <Label Text="Estatura:" FontAttributes="Bold" VerticalOptions="Center" Margin="0,0,10,0"/>
                <Entry Grid.Column="1" Text="{Binding Estatura}" Keyboard="Numeric" HorizontalOptions="FillAndExpand"/>
            </Grid>

            <!-- Sexo -->
            <Grid ColumnDefinitions="80,*">
                <Label Text="Sexo:" FontAttributes="Bold" VerticalOptions="Center" Margin="0,0,10,0"/>
                <Entry Grid.Column="1" Text="{Binding Sexo}" HorizontalOptions="FillAndExpand"/>
            </Grid>

            <!-- Nivel de Actividad -->
            <Grid ColumnDefinitions="80,*">
                <Label Text="Actividad:" FontAttributes="Bold" VerticalOptions="Center" Margin="0,0,10,0"/>
                <Picker Grid.Column="1"
                        ItemsSource="{Binding OpcionesNivelActividad}"
                        SelectedItem="{Binding NivelActividad, Mode=TwoWay}"
                        HorizontalOptions="FillAndExpand"/>
            </Grid>

            <!-- BotÃ³n -->
            <Button Text="Guardar Paciente"
                    Command="{Binding GuardarPacienteCommand}"
                    HorizontalOptions="FillAndExpand"
                    Margin="0,10"/>

            <!-- Errores -->
            <CollectionView ItemsSource="{Binding Errores}" Margin="0,5">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Label Text="{Binding .}" TextColor="Red" Padding="5"/>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

            <!-- Indicadores -->
            <ActivityIndicator
                IsRunning="{Binding IsBusy}"
                IsVisible="{Binding IsBusy}" />

            <Frame BackgroundColor="Green"
                   Padding="8"
                   IsVisible="{Binding IsVisible}">
                <Label
                    FontSize="Title"
                    HorizontalTextAlignment="Center"
                    Text="{Binding Resultado}"
                    TextColor="White" />
            </Frame>
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
